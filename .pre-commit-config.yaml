repos:
  # Built-in hooks from pre-commit
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v6.0.0
    hooks:
      - id: trailing-whitespace
        name: Remove trailing whitespace

  # Secrets detection
  - repo: https://github.com/Yelp/detect-secrets
    rev: v1.5.0
    hooks:
      - id: detect-secrets
        name: Detect secrets
        args: ['--baseline', '.secrets.baseline']
        exclude: package-lock.json

  # ESLint for JavaScript/TypeScript/React
  - repo: local
    hooks:
      - id: eslint
        name: Lint with ESLint
        entry: node_modules/.bin/eslint
        language: system
        files: \.(js|jsx|ts|tsx)$
        types: [file]
        additional_dependencies: []

  # Custom hook to block sensitive files
  - repo: local
    hooks:
      - id: block-sensitive-files
        name: Block sensitive files
        entry: bash -c 'if git diff --cached --name-only | grep -qE "(\.env$|\.env\.|credentials\.json|secrets\.yaml|private.*\.key)"; then echo "ERROR - Attempting to commit sensitive files!"; exit 1; fi'
        language: system
        pass_filenames: false
